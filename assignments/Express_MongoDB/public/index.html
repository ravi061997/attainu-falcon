<!doctype html>
<html lang="en">
  <head>
     <meta charset="utf-8">
     <title>Twitter Page</title>
      <!-- Bootstrap core CSS -->
      <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    </head>
  <body>
       <div class= "container">
         <form class="form-signin"  action="/" method="POST">
         <label for="inputName" class="sr-only">Email address</label>
         <textarea id="inputName"  class="form-control" name="name" placeholder="Enter name" required ></textarea> 
         <label for="inputTweet" class="sr-only">Password</label>
         <textarea id="inputTweet" class="form-control" name="tweet" placeholder="Enter Tweet" required></textarea>
         <input class="btn btn-lg btn-primary btn-block" type="submit" />
         <p class="mt-5 mb-3 text-muted">&copy; 2017-2019</p>
         </form>
        </div>

        <script
        src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
        crossorigin="anonymous"></script>

       <script>
            $.ajax({
            url:'getTweets',
            type:'GET',
            dataType:'json',
            success: function(data) {
            $('.container').prepend('<div id="tweets"></div>');
            for(var i=0; i<data.length; i++) {

            var tweetdiv = "";
            tweetdiv += '<div class="card border border-info rounded my-3">';
            tweetdiv += '<div class="card-header"><h4> #tweet'+ data[1]._id +'</h4></div>';
            tweetdiv += '<div class="card-body">';
            tweetdiv += '<p class="card-text">'+ data[i].tweet + '</p>';
            tweetdiv += '<footer class="blackquote-footer">'+ data[i].name+'</footer>';
            tweetdiv += '<button class = "btn btn-danger">Delete</button><div></div>';    

            $('#tweets').append(tweetdiv);
                  //$('ul').append('<li>' + data[i].name + ':' + data[i].tweet +'</li>');
            }
          }
        })

        $('.btn-danger').on('click', function(){
            var id = $(this).parent().parent().find('h4').text();
            var tweet = $(this).parent().find('.card-text').text();
            console.log(id);
            $.ajax({
                url:'/deleteTweet',
                type:'DELETE',
                dataType:'json',
                data: {tweet: tweet},
                success:function(data) {
                    console.log("Deleted !");
                }
            })
        })
        </script>
    </body>
</html>